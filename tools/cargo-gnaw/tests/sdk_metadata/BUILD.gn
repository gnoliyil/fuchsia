# Copyright 2020 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# DO NOT EDIT. THIS FILE IS GENERATED BY CARGO GNAW. EDIT THE CARGO TOML FILE

gn_source_root = rebase_path("//", root_build_dir)

import("//build/sdk/sdk_atom.gni")

# True if the current GN toolchain instance can be used to create
# Rust sdk_atom() targets.
_generating_sdk = false

# The SDK prefix for the current toolchain.
if (current_toolchain == default_toolchain) {
  _generating_sdk = true
  _sdk_prefix = ""
} else if (is_host) {
  _generating_sdk = true
  _sdk_prefix = "rust_proc_macros"
}

group("sdk_metadata") {
  public_deps = [ ":sdk_metadata-v1_0_0" ]
}

if (_generating_sdk) {
  sdk_atom("sdk_metadata_sdk") {
    id = "sdk://${_sdk_prefix}third_party/rust_crates/sdk_metadata"
    category = "internal"
    meta = {
      source = "sdk_metadata/sdk_metadata.sdk.meta.json"
      dest = "${_sdk_prefix}third_party/rust_crates/sdk_metadata/meta.json"
      schema = "3p_rust_library"
    }
  }
}

rust_library("sdk_metadata-v1_0_0") {
  crate_name = "sdk_metadata"
  crate_root = "//sdk_metadata/src/lib.rs"
  output_name = "sdk_metadata-e14a5f3dc8d9ca6"

  deps = []
  deps += [ ":sub-crate-v1_0_0" ]
  deps += [ ":sub-crate-proc-macro-v1_0_0($host_toolchain)" ]

  rustenv = []

  rustflags = [
    "--cap-lints=allow",
    "--edition=2018",
    "-Cmetadata=e14a5f3dc8d9ca6",
    "-Cextra-filename=-e14a5f3dc8d9ca6",
  ]

  visibility = [ ":*" ]
}

rust_library("sub-crate-v1_0_0") {
  crate_name = "sub_crate"
  crate_root = "//sdk_metadata/sub-crate/src/lib.rs"
  output_name = "sub_crate-1eba52a868057013"

  deps = []

  rustenv = []

  rustflags = [
    "--cap-lints=allow",
    "--edition=2018",
    "-Cmetadata=1eba52a868057013",
    "-Cextra-filename=-1eba52a868057013",
  ]

  visibility = [ ":*" ]
}

rust_proc_macro("sub-crate-proc-macro-v1_0_0") {
  crate_name = "sub_crate_proc_macro"
  crate_root = "//sdk_metadata/sub-crate-proc-macro/src/lib.rs"
  output_name = "sub_crate_proc_macro-bf52f82d4654f78c"

  deps = []

  rustenv = []

  rustflags = [
    "--cap-lints=allow",
    "--edition=2018",
    "-Cmetadata=bf52f82d4654f78c",
    "-Cextra-filename=-bf52f82d4654f78c",
  ]

  visibility = [ ":*" ]
}
