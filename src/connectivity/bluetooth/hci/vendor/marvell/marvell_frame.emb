[$default byte_order: "LittleEndian"]
[(cpp) namespace: "bt_hci_marvell"]

struct MarvellFrameHeader:
  -- The Marvell controller header. Used for frames both going to and coming from the controller.
  -- 'total_frame_size' includes the header in its calculation.
  0      [+3]  UInt  total_frame_size
  $next  [+1]  UInt  channel_id
  let payload_size = total_frame_size - $size_in_bytes

struct MarvellFrame:
  -- Frame as seen by the controller
  0      [+MarvellFrameHeader.$size_in_bytes]  MarvellFrameHeader  header
  $next  [+header.payload_size]                UInt:8[]            payload

struct MarvellCommandHeader:
  0      [+1]  UInt  cmd_type
  1      [+1]  UInt  cmd_length  # Exclusive of this header

struct MarvellSetMacAddrCommand:
  0      [+MarvellCommandHeader.$size_in_bytes]  MarvellCommandHeader  marvell_header
  $next  [+6]                                    UInt:8[]              mac
