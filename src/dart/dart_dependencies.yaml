# Copyright 2016 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

name: modules
dependencies:
  _discoveryapis_commons: ^1.0.4
  built_collection: ^5.1.1
  built_value: ^8.4.2
  checked_yaml: ^2.0.1
  cli_util: ^0.3.5
  edit_distance: ^0.5.0-nullsafety.0
  ffi: ^2.0.1
  flutter_image: ^4.1.4
  flutter_staggered_grid_view: ^0.6.2
  flutter_svg: ^1.1.6
  gcloud: ^0.8.7
  googleapis: ^9.2.0
  googleapis_auth: ^1.3.1
  grpc: ^3.1.0
  html_unescape: ^2.0.0
  image: ^3.2.2
  json_annotation: ^4.7.0
  markdown: ^6.0.1
  mockito: ^5.3.2
  pedantic: ^1.8.0+1
  provider: ^6.0.5
  pubspec_parse: ^1.2.1
  quiver: ^3.1.0
  retry: ^3.1.0
  standard_message_codec: ^0.0.1
  strings: ^0.2.2
  test: ^1.22.0
  # The relationship between matcher and test_api inverted in matcher 0.12.15 and test_api 0.6.0;
  # before these versions, test_api depended on matcher, and after these versions, matcher depends
  # on test_api.
  #
  # This is further complicated by the fact that flutter_tools depends on a precise version of
  # test_api here:
  # https://github.com/flutter/flutter/blob/796c8ef/packages/flutter_tools/pubspec.yaml#L56
  # and that version happens to be < 0.6.0.
  #
  # For reasons I don't entirely understand, if we do not pin matcher here, then the version
  # resolver selects 0.12.15, which depends on test_api, and we get a dependency cycle.
  #
  # This problem goes away in later versions of flutter, but these are not accessible to us because
  # https://flutter-review.googlesource.com/c/recipes/+/43200 disabled uploading of
  # flutter/sky_engine to CIPD, which is needed for any version of flutter we try to update to. Thus
  # at the time of this writing the flutter version linked above is the terminal one that will ever
  # roll into fuchsia.
  matcher: 0.12.14
  tuple: ^2.0.1
  uuid: ^3.0.7
  webdriver: ^3.0.1
# Please refrain from adding dependencies to pinned_dependencies below without
# consulting //src/dart/OWNERS. This is here to allow the update_3p_packages.py
# script to ignore these packages when there is a version mismatch in their
# dependencies vs the dependencies flutter_tool relies on. It is a last resort
# optin to assist with the flutter-with-deps roller in rolling successfully, in
# scenarios where that version mismatch isn't really due to API incompatibility.
pinned_dependencies:
  flutter_mobx: ^2.0.6+5
  mobx: ^2.1.3
  mobx_codegen: ^2.1.1
  protobuf: ^2.1.0
  protoc_plugin: ^20.0.1
  test_core2: 0.4.20
