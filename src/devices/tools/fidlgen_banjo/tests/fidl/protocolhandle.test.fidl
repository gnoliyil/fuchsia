// Copyright 2019 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
library banjo.examples.protocolhandle;

// TODO(surajmalhotra): Reference for handles.

using zx;

@transport("Banjo")
@banjo_layout("ddk-protocol")
closed protocol SynchronousHandle {
    strict Handle(resource struct {
        h zx.handle;
    }) -> (resource struct {
        h zx.handle;
        h2 zx.handle;
    });
    strict Process(resource struct {
        h zx.handle:PROCESS;
    }) -> (resource struct {
        h zx.handle:PROCESS;
        h2 zx.handle:PROCESS;
    });
    strict Thread(resource struct {
        h zx.handle:THREAD;
    }) -> (resource struct {
        h zx.handle:THREAD;
        h2 zx.handle:THREAD;
    });
    strict Vmo(resource struct {
        h zx.handle:VMO;
    }) -> (resource struct {
        h zx.handle:VMO;
        h2 zx.handle:VMO;
    });
    strict Channel(resource struct {
        h zx.handle:CHANNEL;
    }) -> (resource struct {
        h zx.handle:CHANNEL;
        h2 zx.handle:CHANNEL;
    });
    strict Event(resource struct {
        h zx.handle:EVENT;
    }) -> (resource struct {
        h zx.handle:EVENT;
        h2 zx.handle:EVENT;
    });
    strict Port(resource struct {
        h zx.handle:PORT;
    }) -> (resource struct {
        h zx.handle:PORT;
        h2 zx.handle:PORT;
    });
    strict Interrupt(resource struct {
        h zx.handle:INTERRUPT;
    }) -> (resource struct {
        h zx.handle:INTERRUPT;
        h2 zx.handle:INTERRUPT;
    });
    strict Socket(resource struct {
        h zx.handle:SOCKET;
    }) -> (resource struct {
        h zx.handle:SOCKET;
        h2 zx.handle:SOCKET;
    });
    strict Resource(resource struct {
        h zx.handle:RESOURCE;
    }) -> (resource struct {
        h zx.handle:RESOURCE;
        h2 zx.handle:RESOURCE;
    });
    strict EventPair(resource struct {
        h zx.handle:EVENTPAIR;
    }) -> (resource struct {
        h zx.handle:EVENTPAIR;
        h2 zx.handle:EVENTPAIR;
    });
    strict Job(resource struct {
        h zx.handle:JOB;
    }) -> (resource struct {
        h zx.handle:JOB;
        h2 zx.handle:JOB;
    });
    strict Vmar(resource struct {
        h zx.handle:VMAR;
    }) -> (resource struct {
        h zx.handle:VMAR;
        h2 zx.handle:VMAR;
    });
    strict Fifo(resource struct {
        h zx.handle:FIFO;
    }) -> (resource struct {
        h zx.handle:FIFO;
        h2 zx.handle:FIFO;
    });
    strict Guest(resource struct {
        h zx.handle:GUEST;
    }) -> (resource struct {
        h zx.handle:GUEST;
        h2 zx.handle:GUEST;
    });
    strict Timer(resource struct {
        h zx.handle:TIMER;
    }) -> (resource struct {
        h zx.handle:TIMER;
        h2 zx.handle:TIMER;
    });
    strict Profile(resource struct {
        h zx.handle:PROFILE;
    }) -> (resource struct {
        h zx.handle:PROFILE;
        h2 zx.handle:PROFILE;
    });
};

@transport("Banjo")
@banjo_layout("ddk-protocol")
closed protocol AnotherSynchronousHandle {
    strict Handle(resource struct {
        h zx.handle;
    }) -> (resource struct {
        h zx.handle;
        h2 zx.handle;
    });
};

@transport("Banjo")
@banjo_layout("ddk-protocol")
closed protocol AsyncHandle {
    @async
    strict Handle(resource struct {
        h zx.handle;
    }) -> (resource struct {
        h zx.handle;
        h2 zx.handle;
    });
    @async
    strict Process(resource struct {
        h zx.handle:PROCESS;
    }) -> (resource struct {
        h zx.handle:PROCESS;
        h2 zx.handle:PROCESS;
    });
    @async
    strict Thread(resource struct {
        h zx.handle:THREAD;
    }) -> (resource struct {
        h zx.handle:THREAD;
        h2 zx.handle:THREAD;
    });
    @async
    strict Vmo(resource struct {
        h zx.handle:VMO;
    }) -> (resource struct {
        h zx.handle:VMO;
        h2 zx.handle:VMO;
    });
    @async
    strict Channel(resource struct {
        h zx.handle:CHANNEL;
    }) -> (resource struct {
        h zx.handle:CHANNEL;
        h2 zx.handle:CHANNEL;
    });
    @async
    strict Event(resource struct {
        h zx.handle:EVENT;
    }) -> (resource struct {
        h zx.handle:EVENT;
        h2 zx.handle:EVENT;
    });
    @async
    strict Port(resource struct {
        h zx.handle:PORT;
    }) -> (resource struct {
        h zx.handle:PORT;
        h2 zx.handle:PORT;
    });
    @async
    strict Interrupt(resource struct {
        h zx.handle:INTERRUPT;
    }) -> (resource struct {
        h zx.handle:INTERRUPT;
        h2 zx.handle:INTERRUPT;
    });
    @async
    strict Socket(resource struct {
        h zx.handle:SOCKET;
    }) -> (resource struct {
        h zx.handle:SOCKET;
        h2 zx.handle:SOCKET;
    });
    @async
    strict Resource(resource struct {
        h zx.handle:RESOURCE;
    }) -> (resource struct {
        h zx.handle:RESOURCE;
        h2 zx.handle:RESOURCE;
    });
    @async
    strict EventPair(resource struct {
        h zx.handle:EVENTPAIR;
    }) -> (resource struct {
        h zx.handle:EVENTPAIR;
        h2 zx.handle:EVENTPAIR;
    });
    @async
    strict Job(resource struct {
        h zx.handle:JOB;
    }) -> (resource struct {
        h zx.handle:JOB;
        h2 zx.handle:JOB;
    });
    @async
    strict Vmar(resource struct {
        h zx.handle:VMAR;
    }) -> (resource struct {
        h zx.handle:VMAR;
        h2 zx.handle:VMAR;
    });
    @async
    strict Fifo(resource struct {
        h zx.handle:FIFO;
    }) -> (resource struct {
        h zx.handle:FIFO;
        h2 zx.handle:FIFO;
    });
    @async
    strict Guest(resource struct {
        h zx.handle:GUEST;
    }) -> (resource struct {
        h zx.handle:GUEST;
        h2 zx.handle:GUEST;
    });
    @async
    strict Timer(resource struct {
        h zx.handle:TIMER;
    }) -> (resource struct {
        h zx.handle:TIMER;
        h2 zx.handle:TIMER;
    });
    @async
    strict Profile(resource struct {
        h zx.handle:PROFILE;
    }) -> (resource struct {
        h zx.handle:PROFILE;
        h2 zx.handle:PROFILE;
    });
};
