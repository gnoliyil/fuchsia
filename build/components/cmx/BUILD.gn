# Copyright 2021 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

group("cmx_allowlist") {
  #  ________  _________  ________  ________
  # |\   ____\|\___   ___\\   __  \|\   __  \
  # \ \  \___|\|___ \  \_\ \  \|\  \ \  \|\  \
  #  \ \_____  \   \ \  \ \ \  \\\  \ \   ____\
  #   \|____|\  \   \ \  \ \ \  \\\  \ \  \___|
  #     ____\_\  \   \ \__\ \ \_______\ \__\
  #    |\_________\   \|__|  \|_______|\|__|
  #    \|_________|
  # This is an allowlist of targets that use CMX (.cmx) files.
  # CMX is the component manifest v1 syntax. There is a migration in progress
  # to CML files, the component manifest v2 syntax. See:
  # https://fuchsia.dev/fuchsia-src/contribute/open_projects/components/migration
  #
  # Developers are encouraged to migrate to v2. See the migration guide:
  # https://fuchsia.dev/fuchsia-src/development/components/v2/migration
  #
  # The policy at this time is:
  # 1. Use of CMX files outside of fuchsia.git is unrestricted.
  # 2. Pre-existing use of CMX files in fuchsia.git is allowlisted.
  # 3. New usage of CMX files in fuchsia.git is strongly discouraged.
  #    Please see the self-service migration guide.
  # 4. Requests to allowlist new CMX files will be considered on a case-by-case
  #    basis.
  #
  # To add items to the allowlist, please send a change to one of the OWNERS of
  # this file to add an element to the visibility list below.
  #
  # To regenerate:
  # fx gn refs $(fx get-build-dir) //build/components/cmx:cmx_allowlist | sed 's|\(.*:.*\)|"\1",|' | sort | uniq
  visibility = [
    "//examples/components/realm_builder:echo_client_legacy_component_manifest_compile",
    "//examples/components/realm_builder:echo_server_legacy_component_manifest_compile",
    "//src/camera/bin/camera-gym:camera_gym_auto_manifest_compile",
    "//src/camera/bin/camera-gym:camera_gym_manual_manifest_compile",
    "//src/camera/bin/camera-gym/controller_client:camera-gym-ctl_component_manifest_compile",
    "//src/camera/bin/device:camera_device_component_manifest_compile",
    "//src/chromium/web_runner_tests:web_runner_integration_tests_manifest_compile",
    "//src/chromium/web_runner_tests:web_runner_pixel_tests_manifest_compile",
    "//src/connectivity/bluetooth/profiles/bt-a2dp:component_manifest_compile",
    "//src/connectivity/bluetooth/profiles/bt-avrcp-target:component_manifest_compile",
    "//src/connectivity/bluetooth/tools/bt-fct-hci:bt-fct-hci_component_manifest_compile",
    "//src/connectivity/bluetooth/tools/bt-snoop:bt-snoop_component_manifest_compile",
    "//src/connectivity/network/dns:component-legacy_manifest_compile",
    "//src/connectivity/network/netstack:component-legacy_manifest_compile",
    "//src/developer/build_info:build-info-legacy_manifest_compile",
    "//src/developer/forensics/crasher/cpp:crasher_v1_manifest_compile",
    "//src/developer/forensics/crasher/rust:crasher_v1_manifest_compile",
    "//src/developer/memory/monitor:legacy_component_manifest_compile",
    "//src/devices/radar/bin/radarutil:radarutil_component_manifest_compile",
    "//src/diagnostics/archivist:archivist-for-embedding-v1_manifest_compile",
    "//src/experiences/bin/ermine_testserver:component_manifest_compile",
    "//src/fonts:font_provider_cmx_manifest_compile",
    "//src/hwinfo:legacy_hwinfo_component_manifest_compile",
    "//src/intl/intl_services:legacy_component_manifest_compile",
    "//src/intl/intl_services:legacy_component_small_manifest_compile",
    "//src/lib/component:lib-component-go-unittests_component_manifest_compile",
    "//src/lib/fuchsia-component-test/tests:echo_client_component_manifest_compile",
    "//src/lib/fuchsia-component-test/tests:echo_server_component_manifest_compile",
    "//src/lib/isolated_devmgr:isolated-devmgr-tests_manifest_compile",
    "//src/lib/isolated_devmgr:virtual-audio-devmgr_manifest_compile",
    "//src/media/codec:codec_runner_sw_aac_component_manifest_compile",
    "//src/media/codec:codec_runner_sw_ffmpeg_component_manifest_compile",
    "//src/media/codec:codec_runner_sw_sbc_component_manifest_compile",
    "//src/media/codec/factory:component_manifest_compile",
    "//src/media/playback/mediaplayer:mediaplayer_component_manifest_compile",
    "//src/media/playback/mediaplayer:mediaplayer_test_util_component_manifest_compile",
    "//src/media/playback/mediaplayer:mediaplayer_tests_component_cfv1_manifest_compile",
    "//src/modular/bin/basemgr:v1_echo_server_component_manifest_compile",
    "//src/modular/bin/sessionmgr:component-v1_manifest_compile",
    "//src/modular/tests:sessionmgr-integration-test_manifest_compile",
    "//src/sys/appmgr:appmgr_unittests_component_manifest_compile",
    "//src/sys/appmgr:test_component_using_storage_manifest_compile",
    "//src/sys/appmgr/integration_tests:appmgr_realm_integration_tests_manifest_compile",
    "//src/sys/appmgr/integration_tests:crashing_component_manifest_compile",
    "//src/sys/appmgr/integration_tests:echo_server_manifest_compile",
    "//src/sys/appmgr/integration_tests:failing_appmgr_manifest_compile",
    "//src/sys/appmgr/integration_tests/component_events:component_events_integration_test_manifest_compile",
    "//src/sys/appmgr/integration_tests/component_events:test_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/component_events:test_component_with_subrealm_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:components_binary_tests_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:echo1_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:echo2_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:echo_hub_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:echo_stdin_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:getenv1_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:getenv2_manifest_compile",
    "//src/sys/appmgr/integration_tests/components:test_driver_manifest_compile",
    "//src/sys/appmgr/integration_tests/lifecycle:appmgr-lifecycle-tests_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/lifecycle:test-lifecycle-component_manifest_compile",
    "//src/sys/appmgr/integration_tests/lifecycle:test-sysmgr_manifest_compile",
    "//src/sys/appmgr/integration_tests/mock_runner:appmgr_mock_runner_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/mock_runner:fake_component_for_runner_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/outdir:appmgr_out_dir_integration_test_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:cpu_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:cpu_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:debug_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:debug_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:deprecated_ambient_replace_as_exec_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:deprecated_ambient_replace_as_exec_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:deprecated_shell_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:deprecated_shell_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:hypervisor_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:hypervisor_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:info_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:info_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:ioport_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:ioport_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:irq_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:irq_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:mmio_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:mmio_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:none_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:package_cache_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:package_cache_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:package_resolver_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:package_resolver_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:pkgfs_versions_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:pkgfs_versions_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:policy_integration_test_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:power_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:power_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:root_job_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:root_job_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:root_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:root_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:smc_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:smc_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:vmex_resource_allowed_manifest_compile",
    "//src/sys/appmgr/integration_tests/policy:vmex_resource_denied_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox:has_pkg_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox:path-traversal-escape-child_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/ambient-executable-policy:has_ambient_executable_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/ambient-executable-policy:no_ambient_executable_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/ambient-executable-policy:no_ambient_executable_with_features_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/ambient-executable-policy:no_ambient_executable_with_sandbox_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/build-info:has-build-info_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/build-info:no-build-info_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/build-info:restricted-build-info_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/hub:has_hub_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/hub:no_hub_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/isolated-temp:has_isolated_temp_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/isolated-temp:no_isolated_temp_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/shell-commands:has_shell_commands_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/shell-commands:no_shell_commands_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/storage:has_isolated_cache_storage_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/storage:has_isolated_persistent_storage_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/storage:isolated_persistent_storage_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/features/storage:no_persistent_storage_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/sandbox/services:some_services_component_manifest_compile",
    "//src/sys/appmgr/integration_tests/util:util1_manifest_compile",
    "//src/sys/appmgr/integration_tests/util:util2_manifest_compile",
    "//src/sys/lib/legacy_component/tests:echo_legacy_server_manifest_compile",
    "//src/sys/pkg/bin/pkg-cache:isolated_manifest_compile",
    "//src/sys/pkg/bin/pkg-resolver:isolated_manifest_compile",
    "//src/sys/pkg/bin/system-updater:isolated_manifest_compile",
    "//src/sys/sysmgr:sysmgr_component_manifest_compile",
    "//src/sys/sysmgr/integration_tests:mock_resolver_manifest_compile",
    "//src/sys/sysmgr/integration_tests:service_startup_test_manifest_compile",
    "//src/sys/sysmgr/integration_tests:test_sysmgr_service_manifest_compile",
    "//src/sys/sysmgr/test:sysmgr-tests_component_manifest_compile",
    "//src/sys/test_manager/tests/test_data:debug_data_test_v1_manifest_compile",
    "//src/sys/test_manager/tests/test_data:logging-component_manifest_compile",
    "//src/sys/test_runners/legacy_test/test_data/echo_test:echo_test_legacy_manifest_compile",
    "//src/sys/test_runners/legacy_test/test_data/simple_test:simple_test_legacy_manifest_compile",
    "//src/sys/test_runners/legacy_test/test_data/test_with_system_service:test_with_system_service_legacy_manifest_compile",
    "//src/testing/fidl/intl_property_manager:intl_property_manager_component_v1_manifest_compile",
    "//src/tests/end_to_end/package_manager/components:package-manager-sample2_manifest_compile",
    "//src/tests/end_to_end/package_manager/components:package-manager-sample_manifest_compile",
    "//src/ui/a11y/bin/a11y_manager:component_v1_manifest_compile",
    "//src/ui/bin/hardware_display_controller_provider:fake-hardware-display-controller-provider-cmv1-component_manifest_compile",
    "//src/ui/bin/root_presenter:component_v1_for_test_manifest_compile",
    "//src/ui/bin/root_presenter:component_v1_manifest_compile",
    "//src/ui/bin/text:text_manager_comp_manifest_compile",
    "//src/ui/examples/flatland-view-provider:flatland-view-provider-v1_manifest_compile",
    "//src/ui/scenic:component_manifest_compile",
    "//src/ui/tools/tiles:tiles-flatland_manifest_compile",
    "//src/ui/tools/tiles:tiles-gfx_manifest_compile",
    "//src/zircon/bin/hwstress:cpu_component_manifest_compile",
    "//src/zircon/bin/hwstress:flash_component_manifest_compile",
    "//src/zircon/bin/hwstress:hwstress_component_manifest_compile",
    "//src/zircon/bin/hwstress:led_component_manifest_compile",
    "//src/zircon/bin/hwstress:memory_component_manifest_compile",
  ]
}
